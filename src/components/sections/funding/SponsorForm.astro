---
import SectionTitle from '@src/components/elements/ui/SectionTitle.astro';
---

<section
	class="flex w-full flex-col items-start justify-start gap-2 px-8 py-10 sm:p-10 md:p-14 lg:p-20"
>
	<SectionTitle color="black">Become a Sponsor</SectionTitle>
	<p class="text-2xl text-black">
		Interested in sponsoring our conference? We'd love to hear from you!
	</p>
	<div
		id="form-container"
		class="w-full rounded-lg bg-gray-900 p-4 shadow-2xl md:p-8"
	>
		<form
			class="w-full space-y-6 text-xl md:text-2xl"
			method="POST"
			action="/api/funding-formsubmit"
		>
			<div>
				<label
					for="full-name"
					class="mb-2 block text-left text-gray-300">Full Name</label
				>
				<input
					type="text"
					id="full-name"
					name="full-name"
					class="focus:ring-2 focus:ring-blue-500 w-full rounded-lg border border-gray-600 bg-gray-700 p-3 text-white transition-all duration-300 focus:border-transparent"
					required
				/>
			</div>
			<div>
				<label
					for="display-name"
					class="mb-2 block text-left text-gray-300"
					>Display/Compnay Name (Shown on our website and posters)</label
				>
				<input
					type="text"
					id="display-name"
					name="display-name"
					class="focus:ring-2 focus:ring-blue-500 w-full rounded-lg border border-gray-600 bg-gray-700 p-3 text-white transition-all duration-300 focus:border-transparent"
					required
				/>
			</div>
			<div>
				<label for="package" class="mb-2 block text-left text-gray-300"
					>Which sponsorship package are you interested in?</label
				>
				<div class="flex flex-col space-y-2">
					<div class="flex items-center">
						<input
							type="radio"
							id="package-platinum"
							name="package"
							value="platinum"
							class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
							required
						/>
						<label for="package-platinum" class="ml-2 text-gray-300"
							>Platinum ($2000)</label
						>
					</div>
					<div class="flex items-center">
						<input
							type="radio"
							id="package-gold"
							name="package"
							value="gold"
							class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
							required
						/>
						<label for="package-gold" class="ml-2 text-gray-300"
							>Gold ($1000)</label
						>
					</div>
					<div class="flex items-center">
						<input
							type="radio"
							id="package-silver"
							name="package"
							value="silver"
							class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
							required
						/>
						<label for="package-silver" class="ml-2 text-gray-300"
							>Silver ($500)</label
						>
					</div>
					<div class="flex items-center">
						<input
							type="radio"
							id="package-bronze"
							name="package"
							value="bronze"
							class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
							required
						/>
						<label for="package-bronze" class="ml-2 text-gray-300"
							>Bronze ($250)</label
						>
					</div>
					<div class="flex items-center">
						<input
							type="radio"
							id="package-other"
							name="package"
							value="other"
							class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
							required
						/>
						<label for="package-other" class="ml-2 text-gray-300"
							>Other</label
						>
					</div>
				</div>
			</div>
			<div id="other-contributions" class="hidden">
				<label
					for="contributions"
					class="mb-2 block text-left text-gray-300"
				>
					Please specify your contribution (Food, beverages or any
					other form of sponsorship)
				</label>
				<textarea
					id="contributions"
					name="contributions"
					rows="4"
					class="focus:ring-2 focus:ring-blue-500 w-full rounded-lg border border-gray-600 bg-gray-700 p-3 text-white transition-all duration-300 focus:border-transparent"
				></textarea>
			</div>
			<div>
				<label for="email" class="mb-2 block text-left text-gray-300"
					>Email</label
				>
				<input
					type="email"
					id="email"
					name="email"
					class="focus:ring-2 focus:ring-blue-500 w-full rounded-lg border border-gray-600 bg-gray-700 p-3 text-white transition-all duration-300 focus:border-transparent"
				/>
			</div>
			<div>
				<label for="phone" class="mb-2 block text-left text-gray-300"
					>Phone Number</label
				>
				<input
					type="tel"
					id="phone"
					name="phone"
					class="focus:ring-2 focus:ring-blue-500 w-full rounded-lg border border-gray-600 bg-gray-700 p-3 text-white transition-all duration-300 focus:border-transparent"
				/>
			</div>
			<div id="contact-error" class="hidden text-red-500">
				Please provide a valid email or phone number.
			</div>
			<script>
				document
					.querySelector('form')
					?.addEventListener('submit', function (event) {
						const emailElement = document.getElementById(
							'email'
						) as HTMLInputElement | null;
						const phoneElement = document.getElementById(
							'phone'
						) as HTMLInputElement | null;
						const contactError =
							document.getElementById('contact-error');

						const email = emailElement?.value || '';
						const phone = phoneElement?.value || '';
						const emailValid =
							email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
						const phoneValid =
							phone && /^\+?[1-9]\d{1,14}$/.test(phone);

						if (!emailValid && !phoneValid) {
							event.preventDefault();
							contactError?.classList.remove('hidden');
						} else {
							contactError?.classList.add('hidden');
						}
					});

				const packageColors = {
					platinum: { bg: '#3D3E3E', text: 'white' },
					gold: { bg: '#FFC056', text: 'black' },
					silver: { bg: '#ACBDD8', text: 'black' },
					bronze: { bg: '#AD6A29', text: 'white' },
					other: { bg: '#00674F', text: 'white' },
				};
				document
					.querySelectorAll('input[name="package"]')
					.forEach(input => {
						input.addEventListener(
							'change',
							function (this: HTMLInputElement) {
								const otherContributions =
									document.getElementById(
										'other-contributions'
									);
								const formContainer =
									document.getElementById('form-container');
								if (this.value === 'other') {
									otherContributions?.classList.remove(
										'hidden'
									);
								} else {
									otherContributions?.classList.add('hidden');
								}
								const selectedPackage =
									packageColors[
										this.value as keyof typeof packageColors
									];
								formContainer?.style.setProperty(
									'background-color',
									selectedPackage.bg
								);
								formContainer
									?.querySelectorAll('*')
									.forEach(child => {
										(
											child as HTMLElement
										).style.setProperty(
											'color',
											selectedPackage.text
										);
									});
							}
						);
					});
			</script>
			<div>
				<label class="mb-2 block text-left text-gray-300"
					>Are you near UBC Okanagan?</label
				>
				<div class="flex items-center">
					<input
						type="radio"
						id="near-ubc-yes"
						name="near-ubc"
						value="yes"
						class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
					/>
					<label for="near-ubc-yes" class="ml-2 text-gray-300"
						>Yes</label
					>
				</div>
				<div class="mt-2 flex items-center">
					<input
						type="radio"
						id="near-ubc-no"
						name="near-ubc"
						value="no"
						class="focus:ring-blue-500 h-5 w-5 rounded border-gray-600 bg-gray-700 text-blue-600"
					/>
					<label for="near-ubc-no" class="ml-2 text-gray-300"
						>No</label
					>
				</div>
			</div>
			<button
				type="submit"
				class="w-full transform rounded-lg border-none bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-3 text-xl font-bold text-white transition-all duration-300 ease-in-out hover:scale-105 hover:bg-blue-800 hover:from-blue-700 hover:to-blue-800 hover:shadow-lg md:text-2xl"
			>
				Submit Application
			</button>
		</form>
	</div>
</section>

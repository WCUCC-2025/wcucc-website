---
import CalendarOverlay from '../CalendarOverlay.astro';

type Props = {
	title: string;
	description: string;
	location: string;
	startDate: string;
	endDate: string;
	id: string;
};

const { id, title, description, location, startDate, endDate }: Props =
	Astro.props;

const eventDetails: {
	title: string;
	description: string;
	location: string;
	startDate: Date;
	endDate: Date;
} = {
	title,
	description,
	location,
	startDate: new Date(startDate),
	endDate: new Date(endDate),
};
---

<div
	id={`calendar-toggle-${id}`}
	class="relative z-0 w-fit rounded-md bg-[#e0ff4f] px-4 py-1.5 text-[1.1rem] font-semibold text-black shadow-black transition-all duration-200 hover:cursor-pointer hover:bg-[#c9eb4b] hover:shadow"
>
	<slot />
</div>

	<CalendarOverlay id={id} eventDetails={eventDetails} />

<script is:inline define:vars={{ id }}>
	let btnCal = document.querySelector(`#calendar-toggle-${id}`);
	btnCal.addEventListener('click', () => {
		console.log('Clicked Cal', btnCal);
		const overlay = document.querySelector(`#calendar-overlay-${id}`);
		overlay.classList.remove('hidden-el');
		console.log(overlay);
	});
</script>
